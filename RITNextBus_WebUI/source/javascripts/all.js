/*jslint browser: true*//*global $, jQuery*///= require_tree .function updateNextBusses(day, hours, minutes, seconds) {    //day is an int 0-6 representing the day. Follows how the JS Date object orders them Sun-Sat    //hours and seconds for the current time    var elementNames = ['#toProvince', '#fromProvince'];    var allTimes = [[[1215, 1327, 1509, 1621, 1723, 1835, 1947, 2129, 2243, 2305, 2327, 2349],                    ///sunday                    [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2239, 2304, 2329, 2349],                     //monday                    [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2239, 2304, 2329, 2349],                     //tuesday                    [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2239, 2304, 2329, 2349],                     //wednesday                    [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2239, 2304, 2329, 2349],                     //thursday                     [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2239, 2304, 2329, 2349],                     //friday                     [733, 748, 803, 819, 833, 848, 913, 929, 948, 1003,                     1019, 1033, 1048, 1103, 1118, 1133, 1148, 1203, 1219, 1233,                     1248, 1303, 1319, 1333, 1348, 1419, 1433, 1448, 1503, 1519,                     1533, 1548, 1603, 1619, 1635, 1651, 1707, 1723, 1739, 1756,                     1813, 1819, 1844, 1909, 1939, 2009, 2039, 2109, 2139, 2209,                     2243, 2305, 2327, 2349]                     //saturday                     ],    //fromProvinceTimes    [[1014, 1112, 1224, 1406, 1518, 1620, 1732, 1844, 2026, 2230, 2252, 2314, 2336, 2358],    //sunday    [741, 756, 812, 826, 841, 906, 922, 941, 956, 1012, 1026, 1041, 1056,    1111, 1126, 1141, 1156, 1212, 1226, 1241, 1256, 1312, 1326, 1341, 1412, 1426,    1441, 1456, 1512, 1526, 1541, 1556, 1611, 1627, 1643, 1659, 1715, 1731, 1748,    1805, 1830, 1855, 1925, 1955, 2025, 2055, 2125, 2155, 2225, 2250, 2315, 2336, 2358],    //monday thru thursday    [741, 756, 812, 826, 841, 906, 922, 941, 956, 1012, 1026, 1041, 1056,    1111, 1126, 1141, 1156, 1212, 1226, 1241, 1256, 1312, 1326, 1341, 1412, 1426,    1441, 1456, 1512, 1526, 1541, 1556, 1611, 1627, 1643, 1659, 1715, 1731, 1748,    1805, 1830, 1855, 1925, 1955, 2025, 2055, 2125, 2155, 2225, 2250, 2315, 2336, 2358],    //friday    [741, 756, 812, 826, 841, 906, 922, 941, 956, 1012, 1026, 1041, 1056,    1111, 1126, 1141, 1156, 1212, 1226, 1241, 1256, 1312, 1326, 1341, 1412, 1426,    1441, 1456, 1512, 1526, 1541, 1556, 1611, 1627, 1643, 1659, 1715, 1731, 1748,    1805, 1830, 1855, 1925, 1955, 2025, 2055, 2125, 2155, 2230, 2252, 2314, 2336, 2358],    //saturday    [1014, 1112, 1224, 1406, 1518, 1620, 1732, 1844, 2026, 2138, 2230, 2252, 2314, 2336, 2358]    ]];    for (var eleIndex = 0, length = elementNames.length; eleIndex < length; eleIndex++) {        var dayIndex = day;        if (day > 1 && day <=4)            dayIndex = 1;        else if (day == 5)            dayIndex = 2;        else if (day == 6)            dayIndex = 3;        var times = allTimes[eleIndex][dayIndex];        var element = $(elementNames[eleIndex]);        element.text();//clear time        for (var i = 0, tot = times.length; i < tot; i++) {            var time = times[i];            var currentTime = hours*100 + minutes;            if (time > currentTime) {//bus time is in the future                var hoursLeft = Math.round(time/100)-hours;                var timeMin = time % 100;                var minLeft = Math.floor(timeMin - minutes);                if (timeMin < minutes) {                    minLeft = (60 - minutes) + timeMin;                }                minLeft -= 1;                console.log(day + "-" + time +  "-"  + currentTime +  "="  + minLeft);                var secondsLeft = (60 - seconds) % 60;                var timeString = hoursLeft.toString() + ":" + minLeft.toString() + ":" + secondsLeft.toString();                element.text();//clear time                element.text(timeString);                break;//we're done here            }        }    }};window.setInterval(function() {    //use strict;    var d = new Date()    updateNextBusses(d.getDay(), d.getHours(), d.getMinutes(), d.getSeconds())}, 1000);//run once a second